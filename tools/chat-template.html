<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Template | TechConcepts</title>

<!-- SEO -->
<meta name="description" content="Conversational calculator template">
<link rel="canonical" href="https://techconcepts.org/tools/chat-template.html">

<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-815E8YDZW8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-815E8YDZW8');
</script>

<!-- Chat Framework -->
<link rel="stylesheet" href="../styles/chat-ui.css">
<script src="../scripts/chat-framework.js"></script>

<style>
  :root {
    --primary: #1a1a2e;
    --accent: #e94560;
    --accent2: #0f3460;
    --bg: #f8f9fa;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: #2d3436;
    line-height: 1.6;
  }

  .hero {
    background: linear-gradient(135deg, var(--primary) 0%, var(--accent2) 100%);
    color: white;
    padding: 60px 24px 48px;
    text-align: center;
  }

  .hero h1 {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 12px;
  }

  .hero .icon {
    font-size: 3rem;
    margin-bottom: 16px;
  }

  .hero p {
    font-size: 1.1rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }

  .container {
    max-width: 720px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .back-link {
    text-align: center;
    margin: 24px 0;
  }

  .back-link a {
    color: var(--accent);
    text-decoration: none;
    font-size: 0.9rem;
  }

  @media (max-width: 600px) {
    .hero h1 { font-size: 1.6rem; }
  }
</style>
</head>
<body>

<div class="hero">
  <div class="container">
    <span class="icon">ðŸ’°</span>
    <h1>Example Calculator</h1>
    <p>Interactive conversational calculator with modern UI</p>
  </div>
</div>

<div class="container">
  <div class="back-link">
    <a href="https://techconcepts.org/tools/">&larr; Back to Tools</a>
  </div>
</div>

<script>
  // Chat configuration
  const chatConfig = {
    title: "Example Calculator",
    emoji: "ðŸ’°",
    toolName: "example-calc",
    formspreeUrl: "https://formspree.io/f/xpwzgvqr",

    questions: [
      {
        id: 'api_calls',
        type: 'number',
        botMessage: "How many API calls do you make per month?",
        placeholder: "e.g., 100000",
        emoji: "ðŸ“Š",
        min: 1,
        max: 10000000
      },
      {
        id: 'tokens',
        type: 'number',
        botMessage: "What's the average tokens per call?",
        placeholder: "e.g., 1500",
        emoji: "ðŸ”¢",
        min: 100,
        max: 100000
      },
      {
        id: 'model',
        type: 'choice',
        botMessage: "Which model are you currently using?",
        emoji: "ðŸ¤–",
        options: [
          { value: 'gpt4', label: 'GPT-4', emoji: 'ðŸ¤–' },
          { value: 'opus', label: 'Claude Opus', emoji: 'ðŸ§ ' },
          { value: 'sonnet', label: 'Claude Sonnet', emoji: 'âš¡' },
          { value: 'haiku', label: 'Claude Haiku', emoji: 'ðŸŽ¯' }
        ]
      },
      {
        id: 'optimize',
        type: 'yes-no',
        botMessage: "Would you like to see optimization recommendations?",
        emoji: "ðŸ’¡"
      }
    ],

    onComplete: (answers, chat) => {
      // Calculate results
      const modelPricing = {
        gpt4: { input: 30, output: 60, name: 'GPT-4' },
        opus: { input: 15, output: 75, name: 'Claude Opus' },
        sonnet: { input: 3, output: 15, name: 'Claude Sonnet' },
        haiku: { input: 0.25, output: 1.25, name: 'Claude Haiku' }
      };

      const apiCalls = answers.api_calls;
      const tokens = answers.tokens;
      const currentModelKey = answers.model;
      const currentModel = modelPricing[currentModelKey];

      // Assume 40% input, 60% output tokens
      const inputTokens = tokens * 0.4;
      const outputTokens = tokens * 0.6;

      const currentCostPerCall = (inputTokens * currentModel.input + outputTokens * currentModel.output) / 1000000;
      const currentMonthlyCost = currentCostPerCall * apiCalls;

      // Find optimized model
      let optimizedModel = modelPricing.haiku;
      let optimizedModelKey = 'haiku';

      if (currentModelKey === 'haiku') {
        optimizedModel = modelPricing.sonnet;
        optimizedModelKey = 'sonnet';
      }

      const optimizedCostPerCall = (inputTokens * optimizedModel.input + outputTokens * optimizedModel.output) / 1000000;
      const optimizedMonthlyCost = optimizedCostPerCall * apiCalls;
      const monthlySavings = currentMonthlyCost - optimizedMonthlyCost;
      const annualSavings = monthlySavings * 12;

      // Show results
      chat.showResultsCard([
        {
          label: 'Current Monthly Cost',
          value: chat.formatCurrency(currentMonthlyCost)
        },
        {
          label: 'Optimized Monthly Cost',
          value: chat.formatCurrency(optimizedMonthlyCost),
          highlight: true
        },
        {
          label: 'Annual Savings',
          value: chat.formatCurrency(annualSavings),
          highlight: true
        }
      ]);

      // Show recommendation
      if (answers.optimize === 'yes') {
        setTimeout(() => {
          chat.showBotMessage(
            `Switch to ${optimizedModel.name} for simple tasks and save ${chat.formatCurrency(annualSavings)} annually!`,
            'ðŸ’¡'
          );
        }, 1000);
      }

      // Email capture
      setTimeout(() => {
        chat.showEmailCapture("Want a detailed cost breakdown? Drop your email ðŸ‘‡");
      }, 2000);
    }
  };

  // Initialize chat
  document.addEventListener('DOMContentLoaded', () => {
    new ChatEngine(chatConfig);
  });
</script>

</body>
</html>
